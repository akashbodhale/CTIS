(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[958],{4887:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var r=a(5155),s=a(6874),n=a.n(s),d=a(2115);function l(){let[e,t]=(0,d.useState)([]),[a,s]=(0,d.useState)(!1),[l,o]=(0,d.useState)(!1),[i,c]=(0,d.useState)(null),[p,h]=(0,d.useState)({title:"",description:"",condition:"",treatment:"",phase:"",status:"",startDate:new Date,endDate:new Date,location:""});async function b(){let e=await fetch("https://ctis-dged.vercel.app/api/trials");t(await e.json())}function x(e){let{name:t,value:a}=e.target;h(e=>({...e,[t]:t.includes("Date")?new Date(a):a}))}async function m(){if(l&&null!==i){let e={...p,id:i};await fetch("https://ctis-dged.vercel.app/api/trials/".concat(i),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}else{let t=e.length>0?Math.max(...e.map(e=>e.id)):0,a={...p,id:t+1,researcherId:1};await fetch("https://ctis-dged.vercel.app/api/trials",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})}s(!1),o(!1),c(null),b()}return(0,d.useEffect)(()=>{b()},[]),(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4 bg-gray-300 p-2 rounded",children:[(0,r.jsx)("button",{onClick:function(){window.history.back()},className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded",children:"← Back"}),(0,r.jsx)("h1",{className:"text-3xl",children:"Trial Data"}),(0,r.jsx)("button",{onClick:function(){h({title:"",description:"",condition:"",treatment:"",phase:"",status:"",startDate:new Date,endDate:new Date,location:""}),o(!1),c(null),s(!0)},className:"bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded",children:"+ New"})]}),a&&(0,r.jsxs)("div",{className:"bg-gray-100 p-4 rounded mb-4",children:[(0,r.jsx)("h2",{className:"text-2xl mb-2",children:l?"Edit Trial":"Add New Trial"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsx)("input",{className:"border p-2",name:"title",placeholder:"Title",value:p.title,onChange:x}),(0,r.jsx)("input",{className:"border p-2",name:"description",placeholder:"Description",value:p.description,onChange:x}),(0,r.jsx)("input",{className:"border p-2",name:"condition",placeholder:"Condition",value:p.condition,onChange:x}),(0,r.jsx)("input",{className:"border p-2",name:"treatment",placeholder:"Treatment",value:p.treatment,onChange:x}),(0,r.jsx)("input",{className:"border p-2",name:"phase",placeholder:"Phase",value:p.phase,onChange:x}),(0,r.jsx)("input",{className:"border p-2",name:"status",placeholder:"Status",value:p.status,onChange:x}),(0,r.jsx)("input",{className:"border p-2",name:"startDate",type:"date",value:p.startDate.toISOString().split("T")[0],onChange:x}),(0,r.jsx)("input",{className:"border p-2",name:"endDate",type:"date",value:p.endDate.toISOString().split("T")[0],onChange:x}),(0,r.jsx)("input",{className:"border p-2 col-span-2",name:"location",placeholder:"Location",value:p.location,onChange:x})]}),(0,r.jsx)("button",{onClick:m,className:"bg-green-600 hover:bg-green-700 text-white py-2 px-6 rounded mt-4",children:l?"Update":"Save"})]}),(0,r.jsxs)("table",{className:"table-auto w-full border-collapse border border-gray-300",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"border border-gray-300 px-4 py-2",children:"Id"}),(0,r.jsx)("th",{className:"border border-gray-300 px-4 py-2",children:"Title"}),(0,r.jsx)("th",{className:"border border-gray-300 px-4 py-2",children:"Description"}),(0,r.jsx)("th",{className:"border border-gray-300 px-4 py-2",children:"Condition"}),(0,r.jsx)("th",{className:"border border-gray-300 px-4 py-2",children:"Treatment"}),(0,r.jsx)("th",{className:"border border-gray-300 px-4 py-2",children:"Phase"}),(0,r.jsx)("th",{className:"border border-gray-300 px-4 py-2",children:"Status"}),(0,r.jsx)("th",{className:"border border-gray-300 px-4 py-2",children:"Start Date"}),(0,r.jsx)("th",{className:"border border-gray-300 px-4 py-2",children:"End Date"}),(0,r.jsx)("th",{className:"border border-gray-300 px-4 py-2",children:"Location"}),(0,r.jsx)("th",{className:"border border-gray-300 px-4 py-2",children:"Action"})]})}),(0,r.jsx)("tbody",{children:e.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:(0,r.jsx)(n(),{className:"text-blue-600 hover:underline hover:text-blue-800 font-medium",href:"/participants/".concat(e.id),children:e.id})}),(0,r.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:e.title}),(0,r.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:e.description}),(0,r.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:e.condition}),(0,r.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:e.treatment}),(0,r.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:e.phase}),(0,r.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:e.status}),(0,r.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:e.startDate.toString().split("T")[0]}),(0,r.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:e.endDate.toString().split("T")[0]}),(0,r.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:e.location}),(0,r.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:(0,r.jsx)("button",{className:"bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-1 rounded",onClick:()=>{h({title:e.title,description:e.description,condition:e.condition,treatment:e.treatment,phase:e.phase,status:e.status,startDate:new Date(e.startDate),endDate:new Date(e.endDate),location:e.location}),o(!0),c(e.id),s(!0)},children:"Edit"})})]},e.id))})]})]})}},6220:(e,t,a)=>{Promise.resolve().then(a.bind(a,4887))}},e=>{var t=t=>e(e.s=t);e.O(0,[874,441,684,358],()=>t(6220)),_N_E=e.O()}]);